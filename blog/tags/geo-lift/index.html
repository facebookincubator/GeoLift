<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/GeoLift/blog/rss.xml" title="GeoLift RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/GeoLift/blog/atom.xml" title="GeoLift Atom Feed"><title data-react-helmet="true">10 posts tagged with &quot;GeoLift&quot; | GeoLift</title><meta data-react-helmet="true" property="og:title" content="10 posts tagged with &quot;GeoLift&quot; | GeoLift"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://facebookincubator.github.io//GeoLift/blog/tags/geo-lift"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_tags_posts"><link data-react-helmet="true" rel="icon" href="/GeoLift/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://facebookincubator.github.io//GeoLift/blog/tags/geo-lift"><link data-react-helmet="true" rel="alternate" href="https://facebookincubator.github.io//GeoLift/blog/tags/geo-lift" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://facebookincubator.github.io//GeoLift/blog/tags/geo-lift" hreflang="x-default"><link rel="stylesheet" href="/GeoLift/assets/css/styles.db823e0d.css">
<link rel="preload" href="/GeoLift/assets/js/runtime~main.54f086ca.js" as="script">
<link rel="preload" href="/GeoLift/assets/js/main.af2f5142.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/GeoLift/"><div class="navbar__logo"><img src="/GeoLift/img/logo.svg" alt="GeoLift Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/GeoLift/img/logo.svg" alt="GeoLift Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">GeoLift</b></a><a class="navbar__item navbar__link" href="/GeoLift/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/GeoLift/docs/GettingStarted/Walkthrough">Walkthroughs</a><a class="navbar__item navbar__link" href="/GeoLift/Successes">Success Cases</a><a class="navbar__item navbar__link" href="/GeoLift/docs/About">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/GeoLift/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebookincubator/GeoLift/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">üåú</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">üåû</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-tags-post-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">All posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/GeoLift/blog/continuous_geolifts">Continuous GeoLifts - Need For Speed</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/GeoLift/blog/lookback_window">Enter into the time capsule - Determining Lookback Window</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/GeoLift/blog/Python">Introducing GeoLift in Python</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/GeoLift/blog/MultiCell">Multi-Cell Experiments with GeoLift</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/GeoLift/blog/LaggedEffects">Measuring Lagged Effects using GeoLift</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/GeoLift/blog/blueprint-geolift">GeoLift Blueprint Course by Meta</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/GeoLift/blog/inverse-geolift">Inverse GeoLift - inference done cheaper</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/GeoLift/blog/geolift-v23">Launching GeoLift v2.3 - Streamlined and Improved Power Calculations</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/GeoLift/blog/geo-measurement-review">A Brief Review of Geo Measurement Approaches</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/GeoLift/blog/welcome">Welcome</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>10 posts tagged with &quot;GeoLift&quot;</h1><a href="/GeoLift/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/GeoLift/blog/continuous_geolifts">Continuous GeoLifts - Need For Speed</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2023-04-28T00:00:00.000Z" itemprop="datePublished">April 28, 2023</time> ¬∑ <!-- -->7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/NicolasMatrices-v2" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/NicolasMatrices-v2.png" alt="Nicolas Cruces"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/NicolasMatrices-v2" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nicolas Cruces</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="tldr">TL;DR<a class="hash-link" href="#tldr" title="Direct link to heading">‚Äã</a></h2><ul><li>This blog post demonstrates how to deal with treated observations in sequential GeoLift testing.</li><li>Currently, when running two sequential GeoLifts, the treatment period of the first experiment becomes part of the pre-treatment period of the second experiment, potentially affecting results and power calculations.</li><li>To prevent this, you can replace the treatment locations in the first experiment with the best counterfactual available. Once the treatment location has been replaced, make sure to expand the control donor pool with said series.</li><li>We introduce our <code>ReplaceTreatmentSplit</code> function to replace the treated location units, easily implementing our proposed solution.</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">‚Äã</a></h2><p>Advertisers have many questions to answer like, ‚ÄúWhat‚Äôs the incremental impact of this media channel?‚Äù and ‚ÄúWhat‚Äôs the budget elasticity of my investment in this channel?‚Äù.  These questions and more can be answered using GeoLift.</p><p>Since each question is different and we cannot answer them all at the same time, we need to decide which of them we should answer first by building a learning agenda. Our agenda holds everything from business questions and hypotheses to specific experiment designs that will give us the answers we are looking for. For the sake of simplicity, imagine we have two business questions, and we run our first GeoLift (experiment 1) to answer the first one and would like to design a new GeoLift (experiment 2) to give an answer to our second inquiry.</p><p>However, running a second GeoLift immediately after the previous one is not that simple.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="sequential-geolift-testing">Sequential GeoLift testing<a class="hash-link" href="#sequential-geolift-testing" title="Direct link to heading">‚Äã</a></h2><p>At a first glance, we have a couple of options:</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="option-1-repeating-our-experiment-1-treatment-group-in-experiment-2-excluding-the-experiment-1-periods">Option 1: Repeating our experiment 1 treatment group in experiment 2, excluding the experiment 1 periods.<a class="hash-link" href="#option-1-repeating-our-experiment-1-treatment-group-in-experiment-2-excluding-the-experiment-1-periods" title="Direct link to heading">‚Äã</a></h4><p>This implies that we will remove experiment 1 time periods from the pre-treatment period, meaning we will get the same time series we had before experiment 1 was run. Furthermore, if we rerun the power analysis with this series, we will get the same treatment group we had for experiment 1.</p><p>While an attractive option, it lacks flexibility due to the fact that we will probably choose the same treatment we did before experiment 1. Furthermore, we should make sure that the GeoLift model is able to accurately predict the most recent time-stamps, using the latest market dynamics. For example, if we had a test for all of December, then the model trained up to November might struggle to predict January due to different spending trends. Moreover, if the treatment was very long, this might make it very hard to justify tying the set of pre-treatment periods for experiment 1 to the periods during experiment 2.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="option-2-rerunning-the-power-analysis-for-experiment-2-without-excluding-experiment-1-periods">Option 2: Rerunning the power analysis for experiment 2, without excluding experiment 1 periods.<a class="hash-link" href="#option-2-rerunning-the-power-analysis-for-experiment-2-without-excluding-experiment-1-periods" title="Direct link to heading">‚Äã</a></h4><p>Without removing the periods from experiment 1, we will preserve the autocorrelation within the time series and avoid the sudden change that may occur, while keeping the latest time-stamps. Having said this, going with this option poses another threat. Locations that were used as a treatment group in experiment 1 will probably not be chosen as a good setup in the GeoLift ranking algorithm. When we run simulations using those locations, the simulated effect will probably be far off from the observed effect, since they already had a previous treatment that we are not considering.</p><p>If the locations selected as the treatment group presented a good setup for experiment 1, then at least some of them should be selected to be part of the treatment of experiment 2.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="our-solution-replace-treatment-group-values-from-experiment-1">Our solution: Replace treatment group values from experiment 1<a class="hash-link" href="#our-solution-replace-treatment-group-values-from-experiment-1" title="Direct link to heading">‚Äã</a></h3><p>Our goal is maximizing the amount of data we have without excluding any periods and guaranteeing that our dataset does not contain any structural changes (treatment applied to certain locations in experiment 1). To do so, we recommend replacing the values of the locations that were treated during experiment 1, during the periods in which the treatment occurred and including them in the control donor pool.  For reference, here‚Äôs a picture of what this looks like.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/continuous_gl-plot2.png?raw=true" alt="continuous_geolift1"></p><p>Here‚Äôs an example of our <strong>pseudo-code</strong>:</p><ol><li>Define locations that were treated and treatment period during experiment 1.</li><li>Fit a GeoLift counterfactual to each of the treatment locations, training it on experiment 1‚Äôs pre-treatment period.</li><li>Only keep the counterfactual that has the closest match to a treatment location in the pre-treatment period (using <strong>absolute L2 imbalance</strong>, A.K.A. the sum of squared differences between treatment and control prior to the experiment).</li><li>Replace the selected treatment location by its counterfactual values during the experiment 1‚Äôs treatment period.</li><li>Reassign the replaced treatment location to the control donor pool.</li><li>Repeat this process until there are no more treatment locations left.</li></ol><p>This solution has three clear benefits:</p><ul><li>We preserve the time series structure without excluding any data.</li><li>We replace the structural change in the treatment locations by our best estimate of what would have happened if they had not been treated.</li><li>We have a higher chance of providing better counterfactual fits for the replaced treatments because we are enlarging the control donor pool with each replacement.</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="data-driven-validation">Data-driven validation<a class="hash-link" href="#data-driven-validation" title="Direct link to heading">‚Äã</a></h2><p>The last of these benefits <strong>does not necessarily mean</strong> that we will always be better off.  Particularly, the algorithm will provide the same L2 imbalance values for cases where we have a smaller treatment size given that the added value of the replaced treatment to the control donor pool will not be as large.</p><p>In order to understand what was the average impact that our algorithm had on L2 imbalance, we decided to run a random selection of locations to build different treatment groups of 5 locations.  We then passed those random groups through the algorithm, and compared it to the L2 imbalance that the counterfactual would have if the replaced treatment had not been added to the control donor pool. That is what we call the L2 imbalance improvement ratio:</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/continuous_gl-plot3.png?raw=true" alt="continuous_geolift2">
<img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/continuous_gl-plot1.png?raw=true" alt="continuous_geolift3"></p><p>While the majority of the observations for the L2 imbalance improvement ratio are close to zero, there is a negative long tail that shows that there are some cases where our algorithm works better than the alternative.</p><p>To make our finding more robust, we repeated the simulations with randomly selected treatment groups of different sizes. Looking at the 10% and 25% quantiles of the histogram provided above for each treatment size, we saw improvements in L2 imbalance of up to 8% in the 10% quantile. Naturally, the larger the treatment group, the higher the benefit of our proposed solution, in line with our aforementioned hypothesis.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/continuous_gl-table1.png?raw=true" alt="continuous_geolift4"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="how-to-implement-the-algorithm">How to implement the algorithm?<a class="hash-link" href="#how-to-implement-the-algorithm" title="Direct link to heading">‚Äã</a></h2><p>We have recently landed a simple method for you to use if you would like to leverage this algorithm. Simply implement the <code>ReplaceTreatmentSplit</code> function, specifying what the treatment locations and the treatment start date and end date for experiment 1 are. You can pick up the replaced dataset from the <code>$data</code> argument in the list. The <code>$l2_imbalance_df</code> will give you the data frame of L2 imbalances for each treatment location when they were replaced.</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Import libraries and transform data.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">library(GeoLift)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">data(GeoLift_Test)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">geo_data &lt;- GeoDataRead(data = GeoLift_Test,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        date_id = &quot;date&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        location_id = &quot;location&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        Y_id = &quot;Y&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        X = c(), #empty list as we have no covariates</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        format = &quot;yyyy-mm-dd&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        summary = TRUE)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">treatment_group &lt;- c(‚Äòchicago‚Äô, ‚Äòportland‚Äô)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Replace treatment locations for best counterfactual.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">g &lt;- ReplaceTreatmentSplit(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  treatment_locations = treatment_group,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data = geo_data,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  treatment_start_time = 90,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  treatment_end_time = 105,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  model = &quot;none&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  verbose = TRUE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Extract replaced data.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">new_geo_data &lt;- g$data</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="whats-up-next">What‚Äôs up next?<a class="hash-link" href="#whats-up-next" title="Direct link to heading">‚Äã</a></h2><p>Keep your eye out for our coming blog posts, around topics like:</p><ul><li>When should I use Fixed Effects to get a higher signal to noise ratio?</li><li>Long term branding measurement with GeoLift.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-lift">GeoLift</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-measurement">Geo Measurement</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/continuous-lift">continuous lift</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/r">R</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/power-analysis">Power Analysis</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Continuous GeoLifts - Need For Speed" href="/GeoLift/blog/continuous_geolifts"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/GeoLift/blog/lookback_window">Enter into the time capsule - Determining Lookback Window</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2023-02-09T00:00:00.000Z" itemprop="datePublished">February 9, 2023</time> ¬∑ <!-- -->8 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/NicolasMatrices-v2" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/NicolasMatrices-v2.png" alt="Nicolas Cruces"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/NicolasMatrices-v2" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nicolas Cruces</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><em><div align="right">‚ÄúAunque me fuercen yo nunca voy a decir</div></em>
<em><div align="right">Que todo tiempo, por pasado fue mejor&quot;</div></em>
<em><div align="right"> - Luis Alberto Spinetta</div></em></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="tldr">TL;DR<a class="hash-link" href="#tldr" title="Direct link to heading">‚Äã</a></h2><ul><li>The success of a geo-based experiment greatly depends on the Market Selection process.</li><li>In the GeoLift package, we use historical data and a simulation-based approach to identify the best set of treatment and control locations based on the constraints specified by the user.</li><li>Selecting an appropriate value for the <code>lookback_window</code> parameter (the amount of pre-treatment periods that will be considered) is a very important part of the process.</li><li>Based on the analysis presented in this note, we generally recommend using <strong>1/10th of the pre-treatment period as a simulation <code>lookback_window</code></strong> (especially if your time-series has a lot of variability across time).</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="what-is-considered-a-simulation-in-geolift">What is considered a simulation in GeoLift?<a class="hash-link" href="#what-is-considered-a-simulation-in-geolift" title="Direct link to heading">‚Äã</a></h2><p>Essentially, before running the actual test, we are running a series of geo experiments to determine which is the best setup that will pave the way to success. As explained in further detail in <a href="https://www.facebookblueprint.com/student/path/253063" target="_blank" rel="noopener noreferrer">our Blueprint Course</a>, the GeoLift Market Selection process simulates a large number of geo experiments to determine which is the best test and control setup for you.</p><p>In each simulation a <strong>treatment effect</strong> is applied over a <strong>treatment group</strong> during the <strong>treatment period</strong>. Then, GeoLift then trains a <strong>counterfactual</strong> for the treatment group by using all of <strong>the pre-treatment periods</strong> prior to the experiment to assess the model&#x27;s performance.  Let‚Äôs breakdown each of these five components:</p><ul><li><strong>The treatment effect</strong>: is the Lift percentage that will be applied to a set of locations during the testing period.</li><li><strong>The treatment group</strong>: these are a set of locations that will be exposed to the treatment effect.</li><li><strong>The counterfactual</strong>: these are a set of locations that are used to estimate what would have happened to the treatment group if it had not been exposed to the treatment effect.  An easy way to think about it is as a weighted average of all the locations that are not part of the treatment group.</li><li><strong>The treatment period</strong>: represents the moments in which the treatment group will be exposed to the treatment.</li><li><strong>The pre-treatment period</strong>: this refers to the amount of periods that will be used to build the counterfactual, where there was no simulated difference between locations.  During this period, the counterfactual and the treatment group should have a similar behavior.</li></ul><p>Applying different effects to the same group in the same period allows us to holistically determine what the Minimum Detectable Effect (MDE) for that setup will be.  Among other metrics, this helps us understand whether we are dealing with a combination of locations that will have a higher likelihood of observing small effect sizes. However, seasonalities and variations throughout time make can difficult to estimate the MDE with complete certainty.  Fortunately, we can reduce this uncertainty by taking a look at the past!</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="introducing-the-lookback-window-parameter">Introducing the lookback window parameter.<a class="hash-link" href="#introducing-the-lookback-window-parameter" title="Direct link to heading">‚Äã</a></h2><p>Our first simulation uses the most recent/latest periods in our series as our <strong>treatment period</strong> and all of the remaining periods as our <strong>pre-treatment period</strong>.  This gives us the metrics we need to rank treatment groups for those time periods.</p><p>As stated in our <a href="https://facebookincubator.github.io/GeoLift/docs/GettingStarted/Walkthrough" target="_blank" rel="noopener noreferrer">GeoLift Walkthrough</a>, we can increase the number of simulated time periods by changing the <code>lookback_window</code>.  The <code>lookback_window</code> indicates how far back in time the simulations for the power analysis will go.  By increasing the <code>lookback_window</code>, we subtract the last period from the previous simulation‚Äôs total duration and repeat the process over the remaining periods.  Finally, we calculate the average metrics for each treatment group over all of the runs in different periods.</p><p>For example, imagine we have a 90 day long series with different locations and we would like to simulate a 15 day test, with a 2 day <code>lookback_window</code>.</p><ul><li>In the first simulation, the <strong>treatment period</strong> is made up of the most recent dates and Lift is simulated on it.  The remainder, the <strong>pre-treatment period</strong>, is used to build a counterfactual.  So, with a test duration of 15 days, for this iteration we use periods 1 to 75 as a <strong>pre-treatment period</strong> and periods 76 to 90 as a <strong>treatment period</strong>.</li><li>For our second simulation, the treatment period is shifted by one timestamp.  We use periods 1 to 74 as a pre-treatment period and periods 75 to 89 as a <strong>treatment period</strong>.</li><li>We then construct average metrics per each <strong>treatment group</strong>, using these two simulations.  In essence, we are repeating this flow until the number of time periods shifted is equal to the <code>lookback_window</code> parameter.</li></ul><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/lookback_1.png?raw=true" alt="lookbackwindow"></p><p>In this context, more simulations allow us to have a more robust estimate of the metrics for each <strong>treatment group</strong>, observing if the same behavior occurs across different simulated <strong>treatment</strong> and <strong>pre-treatment periods</strong>.  The intuitive idea here is that we would like to capture some of the variability in the time series in our test setups, to avoid assuming something that could be different in the future.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="theres-a-tradeoff-robustness-vs-preciseness">There‚Äôs a tradeoff: robustness vs preciseness<a class="hash-link" href="#theres-a-tradeoff-robustness-vs-preciseness" title="Direct link to heading">‚Äã</a></h2><p>The more we look back into the past, the more simulations per <strong>treatment group</strong> we will have.  This will make our estimates more robust and allow us to make safer predictions with regard to the pre-test metrics.</p><p>However, the more we look back into the past, the less precise our simulation will be as compared to the actual result.  Removing the last periods we have prior to the test leads to two major effects:</p><ul><li>Our simulations become less precise because they have a smaller amount of periods to build the counterfactual than what the actual experiment will have.</li><li>The accuracy of our simulation will be reduced since we are shortening the time that is being considered by the algorithm‚Äôs pre-treatment period.</li></ul><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/lookback_2.png?raw=true" alt="lookback_tradeoff"></p><p>Given this tradeoff, we need to choose the amount of simulations we run considering the potential they have but keeping in mind that they also have a downside. Moreover, it is important to note that incresing the <code>lookback_window</code> parameter will exponentially increase the number of simulations performed in the Market Selection algorithm and will result in a longer runtime.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="how-to-choose-the-best-lookback_window">How to choose the best <code>lookback_window</code>?<a class="hash-link" href="#how-to-choose-the-best-lookback_window" title="Direct link to heading">‚Äã</a></h2><p>The best way to analyze this problem is to capture the variance of detected effects in the same simulated <strong>treatment period</strong> for different <strong>treatment group</strong> combinations.</p><p>We have run this analysis using the dummy dataset that is available within the GeoLift package (<code>data(GeoLift_PreTest)</code>).  This dataset is similar to the example we showed above: it has a total of 90 days of pre-experiment data, and we will simulate a test that will last 15 days.  If we assume that there was no preexisting difference between locations, then the median of detected effects for each test start period should be around zero, which is the true effect.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/lookback_3.png?raw=true" alt="Simulations_lookback"></p><p><em>The plot on the left shows the standard deviation of the detected effect per treatment start period. The plot on the right shows the range of detected effects for different treatment groups.</em></p><p>As we can see from the plot in the left, the standard deviation of the detected effect has a continuous drop from period 67 onwards.  From the second plot, we can also observe that the median effect is close to zero, especially in the last periods.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="putting-it-in-practice">Putting it in practice<a class="hash-link" href="#putting-it-in-practice" title="Direct link to heading">‚Äã</a></h2><p>Since we have 75 pre-treatment periods in total, and the drop in standard deviation occurs in period 67, we would set a <code>lookback_window</code> of 8 periods.</p><p>To be as efficient as possible, we suggest running the GeoLiftMarketSelection function to find the best combination of markets with a <code>lookback_window=1</code>.  With those best candidates, do a deep dive with a longer <code>lookback_window=8</code> for each treatment combination by running GeoLiftPower, plot and analyze their power curves.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="in-conclusion">In conclusion<a class="hash-link" href="#in-conclusion" title="Direct link to heading">‚Äã</a></h2><p>The <code>lookback_window</code> parameter is a fundamental element of a robust Power Analysis and Market Selection. As a best practice, we recommend running a data-driven analysis similar to the one that was showcased here to identify the ideal value for this parameter. Alternatively, <strong>a great rule of thumb is to keep 1/10 of the pre-treatment periods for simulations, once the test duration has been defined</strong>. So, if you have a total of 150 periods before your experiment, and you want to run a 10 day test, a total of 140 pre-treatment periods would remain.  Following this rule, you would have to set a <code>lookback_window=14</code> for the preferred options that come out of the GeoLiftMarketSelection ranking.</p><p>At the very least,  we suggest setting the <code>lookback_window</code> to a value that is at least as large as the time-series‚Äô most granular seasonality (if we observe that sales vary widely throughout the days of the week, then setting the <code>lookback_window</code> to 7 would be a good start).</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="whats-up-next">What‚Äôs up next?<a class="hash-link" href="#whats-up-next" title="Direct link to heading">‚Äã</a></h2><p>Stay tuned for our next blog posts, related to topics like:</p><ul><li>When should I use Fixed Effects to get a higher signal to noise ratio?</li><li>When should our GeoLift test start?</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-lift">GeoLift</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-measurement">Geo Measurement</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/lookback-window">lookback_window</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/r">R</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/power-analysis">Power Analysis</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Enter into the time capsule - Determining Lookback Window" href="/GeoLift/blog/lookback_window"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/GeoLift/blog/Python">Introducing GeoLift in Python</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2022-08-11T00:00:00.000Z" itemprop="datePublished">August 11, 2022</time> ¬∑ <!-- -->2 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/JussanN/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/JussanN.png" alt="Jussan Da Silva"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/JussanN/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jussan Da Silva</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">‚Äã</a></h2><p>Today we released a <a href="https://github.com/facebookincubator/GeoLift/tree/GeoLiftPython" target="_blank" rel="noopener noreferrer">tutorial</a> explaining how to run an end-to-end implementation of GeoLift in Python leveraging the <code>rpy2</code> package.  This has been a frequently requested feature by the GeoLift community. Moreover, it is one that we believe is very important for the continued scaling of GeoLift in data-savvy organizations.</p><p>The goal of this tutorial is to empower Python users to run the GeoLift R functions in Python using the <a href="https://rpy2.github.io" target="_blank" rel="noopener noreferrer"><code>rpy2</code></a> package. The rpy2 is an open source library which enables calling R from Python. It‚Äôs designed to facilitate the use of R by Python programmers.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="geolift-in-python">GeoLift in Python<a class="hash-link" href="#geolift-in-python" title="Direct link to heading">‚Äã</a></h2><p>GeoLift is an end-to-end solution to measure Lift at a Geo-level using the latest developments in Synthetic Control Methods. Through this tutorial it is possible to run GeoLift R functions such as: Power Calculations, Inference, and Plots in Python.</p><p>There are 3 functions in Python under utils.py:</p><ul><li><p><code>GeoLiftData</code>: Load and return the dataset included in the GeoLift package.</p></li><li><p><code>ConvertDf</code>: Convert R dataframe into Pandas if <code>conv_type = &quot;ToPandas&quot;</code> or convert Pandas dataframe into R if <code>conv_type = &quot;ToR&quot;</code>.</p></li></ul><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/GeoLiftPython_1.jpg?raw=true" alt="ConvertDf"></p><ul><li><code>GeoLiftPlot</code>: Receive a specific GeoLift Plot function (defined by the <code>func</code> parameter), its arguments and display the plot.</li></ul><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/GeoLiftPython_2.jpg?raw=true" alt="GeoLiftPlot"></p><p>To run the R GeoLift functions in Python, you need to add <code>GeoLift.</code> in front of it as in <code>GeoLift.GeoLiftMarketSelection()</code>. For example:</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/GeoLiftPython_3.jpg?raw=true" alt="GeoLiftPython"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="start-your-geolift-in-python-now">Start Your GeoLift in Python Now!‚Äã<a class="hash-link" href="#start-your-geolift-in-python-now" title="Direct link to heading">‚Äã</a></h2><p>You can access the GeoLift in Python tutorial in the GeoLiftPython folder hosted in the GeoLift github repository through <a href="https://github.com/facebookincubator/GeoLift/tree/GeoLiftPython" target="_blank" rel="noopener noreferrer">this link</a>. The <code>README</code> file contains all the necessary information to start working with the Python version of GeoLift.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-lift">GeoLift</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-measurement">Geo Measurement</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/python">Python</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/r">R</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Introducing GeoLift in Python" href="/GeoLift/blog/Python"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/GeoLift/blog/MultiCell">Multi-Cell Experiments with GeoLift</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2022-08-10T00:00:00.000Z" itemprop="datePublished">August 10, 2022</time> ¬∑ <!-- -->2 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/ArturoEsquerra/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/ArturoEsquerra.png" alt="Arturo Esquerra"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ArturoEsquerra/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Arturo Esquerra</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="introducing-multi-cell-geolift-tests">Introducing Multi-Cell GeoLift Tests<a class="hash-link" href="#introducing-multi-cell-geolift-tests" title="Direct link to heading">‚Äã</a></h2><p>We&#x27;re introducing Multi-Cell capabilities to the GeoLift code that can empower users to easily measure multiple treatments in a single experiment through different cells. These new capabilities unlock the potential to plan and execute tests to measure across strategies and channels! Launched with <code>GeoLift v2.5</code>, you now can:</p><ul><li><p>Easily set-up Multi-Cell tests through a Statistical Power-based Market Selection.</p></li><li><p>Calculate and plot the Power Curves for Multi-Cell tests.</p></li><li><p>Determine the test design required to find a Winner Cell.</p></li><li><p>Inference of Multi-Cell tests.</p></li><li><p>Get inspired with some of our external success cases of Multi-Cell tests showing how to <a href="https://www.facebook.com/business/success/ruffles-mexico?locale=es_LA" target="_blank" rel="noopener noreferrer">optimize a channel</a> or how to measure <a href="https://www.facebook.com/business/success/3-liverpool?locale=es_LA" target="_blank" rel="noopener noreferrer">incrementality across digitial channels</a>.</p></li><li><p>Learn how to run Multi-Cell tests with our <a href="https://facebookincubator.github.io/GeoLift/docs/GettingStarted/MultiCellWalkthrough" target="_blank" rel="noopener noreferrer">new Multi-Cell walkthrough</a> and <a href="https://github.com/facebookincubator/GeoLift/" target="_blank" rel="noopener noreferrer">GeoLift v2.5 now</a>!</p></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="multi-cell-tests">Multi-Cell Tests<a class="hash-link" href="#multi-cell-tests" title="Direct link to heading">‚Äã</a></h2><p>We&#x27;ve introduced a set of new capabilities to GeoLift focused at Multi-Cell tests. Specifically, we added four new functions to set-up and execute these tests in a simple yet powerful way.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="1-multicellmarketselection">1. MultiCellMarketSelection<a class="hash-link" href="#1-multicellmarketselection" title="Direct link to heading">‚Äã</a></h3><p><code>MultiCellMarketSelection()</code> will help the user identify and select their Test Markets based on their desired number of cells for either Standard or Inverse/Negative GeoLifts.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/MultiCellBlog1.jpg?raw=true" alt="MarketSelection"></p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/MultiCellBlog2.jpg?raw=true" alt="MarketSelectionLiftPlots"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="2-multicellpower">2. MultiCellPower<a class="hash-link" href="#2-multicellpower" title="Direct link to heading">‚Äã</a></h3><p>After finding the optimal test and control locations for the Multi-Cell test, the user is able to estimate and plot the Power Curves for each of his Test Markets through the <code>MultiCellPower()</code> function.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/MultiCellBlog3.jpg?raw=true" alt="PowerCurves"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="3-multicellwinner">3. MultiCellWinner<a class="hash-link" href="#3-multicellwinner" title="Direct link to heading">‚Äã</a></h3><p>When the test&#x27;s objective is to identify a winner strategy or channel, the user has the option to use <code>MultiCellWinner()</code> which will identify how much better the performance of Cell A compared to Cell B should be in order to declare a winner through a statistical test. If more than two cells are provided, the test will perform all pairwise comparisons.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/MultiCellBlog4.jpg?raw=true" alt="Winner"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="4-geoliftmulticell">4. GeoLiftMultiCell<a class="hash-link" href="#4-geoliftmulticell" title="Direct link to heading">‚Äã</a></h3><p>Finally, after the test finishes <code>GeoLiftMultiCell()</code> will compute the inference and will show whether there was a winning cell based on the test results!</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/MultiCellBlog5.jpg?raw=true" alt="Results">
<img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/MultiCellBlog6.jpg?raw=true" alt="ResultsPlot"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="start-your-multi-cell-testing-now">Start Your Multi-Cell Testing Now!<a class="hash-link" href="#start-your-multi-cell-testing-now" title="Direct link to heading">‚Äã</a></h2><p>Learn more about how to run Multi-Cell tests through our <a href="https://facebookincubator.github.io/GeoLift/docs/GettingStarted/MultiCellWalkthrough" target="_blank" rel="noopener noreferrer">Multi-Cell GeoLift Walkthrough</a>, get the latest version of GeoLift from the <a href="https://github.com/facebookincubator/GeoLift/" target="_blank" rel="noopener noreferrer">GitHub repository</a> and start testing!</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-lift">GeoLift</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-measurement">Geo Measurement</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/multi-cell">MultiCell</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/cross-channel">CrossChannel</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/optimization">Optimization</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Multi-Cell Experiments with GeoLift" href="/GeoLift/blog/MultiCell"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/GeoLift/blog/LaggedEffects">Measuring Lagged Effects using GeoLift</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2022-06-24T00:00:00.000Z" itemprop="datePublished">June 24, 2022</time> ¬∑ <!-- -->6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/michael-khalil" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/michael-khalil.png" alt="Michael Khalil"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/michael-khalil" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Khalil</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="tldr">TL;DR<a class="hash-link" href="#tldr" title="Direct link to heading">‚Äã</a></h2><ul><li>A post test conversion window can help account for lagged effects of your advertising efforts.</li><li>These can be very useful when measuring conversions with long purchase cycles or when trying to determine an appropriate cooldown period between campaigns.</li><li>To determine the duration of a post test conversion window, we can monitor the treatment effects between test and control after the experiment ends until the two reconverge within a region of practical equivalence (ROPE).</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">‚Äã</a></h2><p>Marketers are often running GeoLift experiments to assess the impacts of their advertising efforts.  However, advertising effects are rarely instantaneous.  Certain actions have longer conversion cycles and will require continued monitoring after campaigns complete to assess their impacts in full.  We explore the usage of post test conversion windows to measure these lagged effects and some of the considerations advertisers should take when thinking about using them.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="what-is-a-post-test-conversion-window-and-why-do-we-use-them">What is a post test conversion window and why do we use them?<a class="hash-link" href="#what-is-a-post-test-conversion-window-and-why-do-we-use-them" title="Direct link to heading">‚Äã</a></h2><p>A post test conversion window is an interval of time after the completion of an experiment where we continue to track conversions to account for delayed impacts of our advertising efforts.  If the time it takes for our customers to take a desired action significantly lags when they view our advertisement, we can append this window and monitor our desired event after the experiment concludes.</p><p>Post test conversion windows can also be used as a cooldown period between testing different strategies.  They help us run cleaner experiments knowing we are closer to steady-state performance without the lagged effects of other campaigns.</p><blockquote><p>Jasper‚Äôs Market, a fictional retailer, needed to understand the value of their upcoming marketing campaign.  They plan on running a month-long campaign and know they have a typical purchase cycle of three weeks.  In other words, it takes their customers an average of three weeks from when they see an advertisement to physically going to the store and making a purchase.  Jasper‚Äôs Market felt that they would not be able to fully capture the impact of their marketing efforts by just measuring when their campaign is live, so they decided to append a post test conversion window to their experiment to measure the delayed effects of their campaign.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_31ik" id="when-should-we-include-a-post-test-conversion-window">When should we include a post test conversion window?<a class="hash-link" href="#when-should-we-include-a-post-test-conversion-window" title="Direct link to heading">‚Äã</a></h2><p>When deciding to include a post test conversion window, we are balancing two different forces.  On one hand we want to incorporate the lagged effects of our advertising efforts, better representing the complete impact of the campaign, while simultaneously trying to avoid introducing noise into the experimental analysis and potentially diluting the impact of our campaign.</p><p>To balance this in our favor, it makes sense to incorporate a post test conversion window when the marketing campaign effects we are measuring occur well after the advertisement is delivered.  The shorter the duration of the campaign relative to the time it typically takes for the conversion to occur (purchase cycle) the more likely we will benefit from including this window.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="how-do-we-determine-the-optimal-length">How do we determine the optimal length?<a class="hash-link" href="#how-do-we-determine-the-optimal-length" title="Direct link to heading">‚Äã</a></h2><p>We can start by fixing the post test conversion window to the duration of our typical purchase cycle.  We can then measure the daily incremental conversion volume or average treatment effect on treated (ATT) over both the test period and the post test conversion window to determine the incremental impact of the test.</p><p>To determine the optimal duration for future tests, we can take note of how long it takes for test and control geographies to reconverge after the campaign treatment ends and set that as the duration going forward.  In some instances, the test and control populations might not reconverge exactly.  For these cases, we could determine a ‚ÄòRegion of Practical Equivalence‚Äô (ROPE) for the ATT and if the discrepancy falls within that range, we can change the post test conversion duration.  If the discrepancy is large however, we should inspect the individual geographies and ensure no unusual events occurred within any of the test or control locations and possibly repeat the experiment before assuming the effect goes into perpetuity.</p><blockquote><p>Jasper‚Äôs Market decided to launch their geo-experiment with a post conversion window of three weeks.  By doing this they ensure they will capture the lagged effects of their marketing efforts.  After the experiment ended, they continued monitoring their ATT.  As they had suspected, the gap between test and control did not immediately close after the experiment but continued for an additional two weeks before reconverging back to a negligible level.   Had they stopped monitoring the results after the end of the campaign they would have fully captured the impact of their efforts.  Having the post conversion window also helped them identify the amount of time needed after the campaign ended to run their next experiment without the fear of contamination.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_31ik" id="viewing-post-test-conversion-windows-in-geolift">Viewing Post Test Conversion Windows in GeoLift<a class="hash-link" href="#viewing-post-test-conversion-windows-in-geolift" title="Direct link to heading">‚Äã</a></h2><p>We recently added a small change to version 2.4.32, which allows the user to input the number of periods included as a post test conversion window.   This update has been added to both the absolute Lift and the ATT plots.
Within Lift you can include a ‚Äòpost_test_treatment_periods‚Äô which will allow you to view the Treatment and Post Treatment periods in different colors.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/LaggedEffects_Lift.png?raw=true" alt="LaggedEffectsLift"></p><p>Additionally in the ATT plot you can also include the ‚Äòpost_test_treatment_periods‚Äô and a ROPE = TRUE parameter which will delineate the post_treatment window and show you the region of practical equivalence defined as between 10% and 90% quantiles for the ATT prior to the experiment.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/LaggedEffects_ATT.png?raw=true" alt="LaggedEffectsLift"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="final-thoughts">Final Thoughts<a class="hash-link" href="#final-thoughts" title="Direct link to heading">‚Äã</a></h2><p>When measuring the impact of your next advertising campaign, consider adding a post test conversion window to capture the lagged effects of your marketing efforts. The longer the purchase cycle for your product the more crucial it is that you incorporate one in your analysis. In addition to helping with measurement the cooldown period will also ensure you are ready to launch your next experiment on a blank slate without contamination of your prior campaign.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="whats-up-next">What‚Äôs up next?<a class="hash-link" href="#whats-up-next" title="Direct link to heading">‚Äã</a></h2><p>Stay tuned for our next blog posts, related to topics like:</p><ul><li>Calibrating your MMM model with GeoLift.</li><li>When should I use Fixed Effects to get a higher signal to noise ratio?</li><li>When should our GeoLift test start?</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-lift">GeoLift</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-measurement">Geo Measurement</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Measuring Lagged Effects using GeoLift" href="/GeoLift/blog/LaggedEffects"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/GeoLift/blog/blueprint-geolift">GeoLift Blueprint Course by Meta</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2022-06-06T00:00:00.000Z" itemprop="datePublished">June 6, 2022</time> ¬∑ <!-- -->2 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/ArturoEsquerra/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/ArturoEsquerra.png" alt="Arturo Esquerra"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ArturoEsquerra/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Arturo Esquerra</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/NicolasMatrices-v2" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/NicolasMatrices-v2.png" alt="Nicolas Cruces"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/NicolasMatrices-v2" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nicolas Cruces</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/michael-khalil" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/michael-khalil.png" alt="Michael Khalil"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/michael-khalil" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Khalil</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img src="https://facebook-cdn.exceedlms.com/uploads/resource_hero_pictures/targets/603247/w2400/2400-x-650.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9mYWNlYm9vay1jZG4uZXhjZWVkbG1zLmNvbS91cGxvYWRzL3Jlc291cmNlX2hlcm9fcGljdHVyZXMvdGFyZ2V0cy82MDMyNDcvdzI0MDAvMjQwMC14LTY1MC5wbmciLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE2NTQ1NDY3OTh9fX1dfQ__&amp;Signature=DXer4smR166~jI0jTqOkQUTKAd2tK2LhYVNa0H0qJ7iPsaJNAQNHxOLEwdbt~4lY0rUA5xhPQyYJWsgT9uwgUKvu33inf0SKAGvDCN2bfdfOWuwx1Na0ByjojRPWgBKZD3V43IvpGqq-zdtU4h9BJ4qh5btYF172hMcNciOQbPDLRurT55Nx0IdJpvRq09dZqOzK22-Eoa3B0kOqL5y4UzIbgw0MjIjj2sSpu2tCTpCoHjxQ6gzZQ~1ecdfFY7B1kC52kPmBFYrREjN6DQvELBKmxYfbukVSaD5YO34dUYOTzuxIecgHPpjy97VOueh6Zu1MjpEbLi0SWHCvYnBigg__&amp;Key-Pair-Id=APKAJINUZDMKZJI5I6DA" alt="Blueprint"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="new-geolift-course-by-meta-blueprint">New GeoLift Course by Meta Blueprint<a class="hash-link" href="#new-geolift-course-by-meta-blueprint" title="Direct link to heading">‚Äã</a></h2><p>We are excited to share the launch of our new self-paced step-by-step tutorial to teach you how to run geo-experiments with GeoLift!</p><p>Geo experimentation can help advertisers establish causal relationships between their marketing efforts and a business outcome. While there are many tools to run impact analysis, setting up these types of experiments can be a challenge. That is why we have developed GeoLift, one of the newest additions to the Meta Open Source library.</p><p>As an open source tool, we want to continue democratization of geo experimentation knowledge. Today, we are announcing that we have just published our first virtual and free <a href="https://www.facebookblueprint.com/student/path/253063-geolift-marketing-measurement?sid=cd9a46bc-9685-4af4-8ac3-4482e858fba9&amp;sid_i=5" target="_blank" rel="noopener noreferrer">course on GeoLift on Meta Blueprint</a>.</p><p>In just 50 minutes, we will go over:</p><ul><li>Introduction to GeoLift - The features of the GeoLift solution and how it can support your business goals, comparing it to other existing geo experimentation methods.</li><li>Design a GeoLift Experiment - The steps and data required to design a GeoLift experiment.</li><li>Apply Best Practices With GeoLift - How to apply best practices with GeoLift experiments and evaluate whether you can use other experiments instead.</li></ul><p>Optional Lessons for the more technical audience:</p><ul><li>Implement the GeoLift Solution - How to run simulations and determine the best test market for a GeoLift experiment.</li><li>Run a Successful GeoLift Experiment - How to use the GeoLift solution R code to run a successful GeoLift experiment</li></ul><p>Happy testing!</p><p><a href="https://www.facebookblueprint.com/student/path/253063-geolift-marketing-measurement?sid=cd9a46bc-9685-4af4-8ac3-4482e858fba9&amp;sid_i=5/" target="_blank" rel="noopener noreferrer"><img src="https://facebook-cdn.exceedlms.com/uploads/organizations/branding_logos/977/full/Meta_Blueprint_lockup_positive_primary_RGB__281_29.png?1636402332&amp;Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9mYWNlYm9vay1jZG4uZXhjZWVkbG1zLmNvbS91cGxvYWRzL29yZ2FuaXphdGlvbnMvYnJhbmRpbmdfbG9nb3MvOTc3L2Z1bGwvTWV0YV9CbHVlcHJpbnRfbG9ja3VwX3Bvc2l0aXZlX3ByaW1hcnlfUkdCX18yODFfMjkucG5nPzE2MzY0MDIzMzIiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE2NTQ1NDczOTR9fX1dfQ__&amp;Signature=NDbZh2nCfpeJ3MBdHv2-AATzLGuX7YFD4YCcRCwDLbM~mEHBkT0a30yUFa86GnQVJhsLBqW2~jNE4SDTTf9gFkfJ0wg2HfT8dX1SAJoVkD~H7oNPy21QDVXXiDNoMrxoouuSz64OYIjSlUEtVEkkBYF1B60~ErquO7C4ubmGv49hbCOBuLl-6B0ZFQYnYocScAlG0QNuezMG6AhxSxPKOV-zQO5YPUvqMd~hCKmOkeqTsPONJ4Fv8obG-8SET7NGU3Hqen3pG2CRiQqAlZ1EKb0~FA59Z47RMIgsS-FM~EtkxbhRLSwvp9Ccfnc2YYDN3Sae~sIy~-aFyVsJnXV1oA__&amp;Key-Pair-Id=APKAJINUZDMKZJI5I6DA" alt="MetaBlueprint"></a></p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-lift">GeoLift</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-measurement">Geo Measurement</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about GeoLift Blueprint Course by Meta" href="/GeoLift/blog/blueprint-geolift"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/GeoLift/blog/inverse-geolift">Inverse GeoLift - inference done cheaper</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2022-05-12T00:00:00.000Z" itemprop="datePublished">May 12, 2022</time> ¬∑ <!-- -->7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/NicolasMatrices-v2" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/NicolasMatrices-v2.png" alt="Nicolas Cruces"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/NicolasMatrices-v2" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nicolas Cruces</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="tldr">TL;DR:<a class="hash-link" href="#tldr" title="Direct link to heading">‚Äã</a></h2><ul><li>Inverse GeoLifts help advertisers reduce geo experiment holdout sizes by inverting who sees ads: they show ads to the control group and do not show ads to the treatment group.</li><li>Given that geo-experiments require large control groups, Inverse GeoLifts are a good way of reducing holdout groups and opportunity cost without losing testing accuracy.</li><li>While Standard GeoLifts are great tools to measure a new media activity, ongoing media is best tested with an Inverse GeoLift.</li><li>MMM calibration: Standard GeoLifts are straightforward inputs into MMMs, while Inverse GeoLifts have a larger complexity for this use case.</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="introduction-and-motivation">Introduction and motivation<a class="hash-link" href="#introduction-and-motivation" title="Direct link to heading">‚Äã</a></h2><p>GeoLift is an end-to-end solution that empowers you to determine the real effect of media via geographical experiments.</p><ul><li><strong>It‚Äôs causal.</strong>  GeoLift follows the KPI of a treatment group and compares it to what would have happened to that treatment group, if they had not been treated.  This is what we call a counterfactual.  The latter is built off of control locations that will not be exposed to the treatment effect and paired as close as possible to the treatment group, prior to the test.</li><li><strong>It‚Äôs transparent.</strong>  Being an open source package <a href="https://github.com/facebookincubator/GeoLift" target="_blank" rel="noopener noreferrer">hosted on Github</a>, the code is freely available for everyone to use and inspect.</li><li><strong>It sets you up for success.</strong>  There are many packages that help you analyze geographical quasi-experiments.  There‚Äôs only one that runs power analysis via simulations to help the user define where the treatment should be applied, on top of the standard analysis module.</li><li>It‚Äôs based on <a href="https://www.tandfonline.com/doi/abs/10.1080/01621459.2021.1929245" target="_blank" rel="noopener noreferrer">cutting-edge econometric models</a>.</li></ul><p>In order to construct a robust counterfactual, GeoLift usually requires more than half the amount of available locations to be part of the control group.  This is because the counterfactual is created as a linear combination of the units in the pool of controls, therefore, richer pools tend to provide more robust counterfactuals.  Standard GeoLifts can be a great setup when you are trying to measure the positive effect that new media has on your business.</p><p>However, <strong>it can be detrimental to run an experiment with a large holdout when you would like to measure ongoing media efforts</strong>.  This has to do with the opportunity cost of running a test.  When you are holding out media from certain locations, your total KPI will decrease by the effect that media has in those locations, scaled by the size of the holdout.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/OppCost.png?raw=true" alt="OppCost"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="a-new-hope">A new hope<a class="hash-link" href="#a-new-hope" title="Direct link to heading">‚Äã</a></h2><p>A great way to reduce holdout size without compromising experiment accuracy is to <strong>flip GeoLift on its head</strong>: instead of showing media to the treatment group and holding out the control group, you holdout the treatment group and show media to the control group.  This is what we refer to as an Inverse GeoLift.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/InverseLiftTable.png?raw=true" alt="InverseTable"></p><p>Inverse GeoLifts have a different interpretation than Standard GeoLifts.  Instead of measuring the contribution that media is having on the treatment locations, you are measuring the opportunity cost that holding out media has on the treatment locations.</p><p>The main assumption here is that positive and negative effects are interchangeable.  In other words, if you would run a Standard or an Inverse GeoLift, the only thing that would change is the sign of the effect, not its absolute value.  <strong>Don‚Äôt worry</strong>: when setting up a GeoLift and deciding which is the best treatment group for the experiment, the difference between the detected effect and the true effect is a variable that we are taking into account to rank different location combinations. Treatment setups that have a low difference are preferred and will be highly ranked.  <a href="https://github.com/facebookincubator/GeoLift/blob/main/vignettes/GeoLift_Walkthrough.md#power-analysis" target="_blank" rel="noopener noreferrer">Check here</a> to see what the ranking variables look like in our Walkthrough.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/TypesGeoLift.png?raw=true" alt="TypesGeoLift"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="tips-for-building-and-analyzing-an-inverse-geolift">Tips for building and analyzing an Inverse GeoLift<a class="hash-link" href="#tips-for-building-and-analyzing-an-inverse-geolift" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="determine-budget-for-the-test">Determine budget for the test.<a class="hash-link" href="#determine-budget-for-the-test" title="Direct link to heading">‚Äã</a></h3><p>As long as you know your Cost Per Incremental Conversion (CPIC), Standard GeoLifts will tell you the minimum budget that you should invest in the treatment group.  For Inverse GeoLifts, we have to interpret the budget suggestion as the minimum amount of money that should be taken away from the treatment group.  You can see these values in the <code>Investment</code> column from the output of <code>GeoLiftMarketSelection</code>.</p><p>If your treatment group is currently investing less than the required budget, then it will be hard to detect an effect, given that the CPIC is accurate.  You should try to select treatment setups that have a current investment that is below the absolute value of the required budget.  If there are no feasible options,  we suggest increasing the budget for all markets within the control group to ensure that the minimum amount of investment in the treatment group is met.  While this could change Business As Usual media circumstances, it becomes necessary in order to run a well-powered experiment. A good ad hoc rule for these cases is to compute the extra budget needed by calculating the difference between the required budget and the current investment in treatment and scaling that by the treatment investment share over total investment.  This will give you the value that you need to put up to run a successful experiment.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/ExtraInvestment.png?raw=true" alt="ExtraInvestment"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="keep-an-eye-on-the-weights-for-the-counterfactual">Keep an eye on the weights for the counterfactual.<a class="hash-link" href="#keep-an-eye-on-the-weights-for-the-counterfactual" title="Direct link to heading">‚Äã</a></h3><p>When setting up the test, you can access the weights for each of the control locations with the <code>GetWeights()</code> method.  This will show you how each of the locations that will not be treated (shown media ads) will be weighted within the counterfactual.</p><p>When running an Inverse GeoLift, it‚Äôs important to guarantee that you will show media ads in these locations.  If available, you can validate this by getting an investment report by location and ensuring that all locations with a positive weight in the counterfactual from GeoLift are being shown ads.  If this condition is not met, we could be observing a very small treatment effect due to dilution of media within the control group, when the real treatment effect could be large.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="look-for-symmetric-power-curves">Look for symmetric power curves<a class="hash-link" href="#look-for-symmetric-power-curves" title="Direct link to heading">‚Äã</a></h3><p>A symmetric power curve with respect to the y axis will guarantee that there are no considerable differences for a particular setup when changing from a Standard to an Inverse GeoLift.  This is another guarantee that our assumptions for these types of tests hold.  You can visualize this by running the <code>GeoLiftPower()</code> function with positive and negative effects, a larger <code>lookback_window</code> and plotting its output.  You can check for examples of what it should look like in our Github Walkthrough.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="calculate-the-treatments-cpic">Calculate the Treatment‚Äôs CPIC<a class="hash-link" href="#calculate-the-treatments-cpic" title="Direct link to heading">‚Äã</a></h3><p>At the end of your experiment, you will want to know how much each incremental action in the treatment group cost.  Since you did not invest in the treatment, you need to estimate the budget in that group.  In order to do so, you can calculate the sum of GeoLift weights from the counterfactual and multiply them by the investment per location in the control.  Dividing it by the incremental conversions will give you the Cost Per Incremental Conversion.</p><p><img src="https://github.com/facebookincubator/GeoLift/blob/main/website/static/img/CPICEquation.png?raw=true" alt="CPIC"></p><p>Where t0 represents the last pre-treatment time-stamp, T represents the treatment end, and N represents the number of units in the pool of controls.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="whats-up-next">What‚Äôs up next?<a class="hash-link" href="#whats-up-next" title="Direct link to heading">‚Äã</a></h2><p>Stay tuned for our next blog posts, related to topics like:</p><ul><li>Calibrating your MMM model with GeoLift.</li><li>What should my lookback window be?</li><li>When should our GeoLift test start?</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="want-to-try-out-your-first-inverse-geolift">Want to try out your first Inverse GeoLift?<a class="hash-link" href="#want-to-try-out-your-first-inverse-geolift" title="Direct link to heading">‚Äã</a></h2><p>Install our Github package by <a href="https://github.com/facebookincubator/GeoLift#installing-geolift" target="_blank" rel="noopener noreferrer">following this link</a>, or join our Facebook Group if you have further questions on our open source tool!</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-lift">GeoLift</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-measurement">Geo Measurement</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/inverse-geo-lift">Inverse GeoLift</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Inverse GeoLift - inference done cheaper" href="/GeoLift/blog/inverse-geolift"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/GeoLift/blog/geolift-v23">Launching GeoLift v2.3 - Streamlined and Improved Power Calculations</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2022-03-03T00:00:00.000Z" itemprop="datePublished">March 3, 2022</time> ¬∑ <!-- -->3 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/ArturoEsquerra/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/ArturoEsquerra.png" alt="Arturo Esquerra"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ArturoEsquerra/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Arturo Esquerra</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="geolift-v23-release">GeoLift v2.3 Release<a class="hash-link" href="#geolift-v23-release" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="tldr">TL;DR<a class="hash-link" href="#tldr" title="Direct link to heading">‚Äã</a></h3><ul><li>The new version of the GeoLift code makes the pre-test analysis (Power Analysis and Market Selection) easier than ever before! The entire process is now handled by a single function: <code>GeoLiftMarketSelection()</code>.</li><li>The new package contains dozens of new features, functionalities, and bug fixes.</li><li>A new and improved walkthrough guide is available to help internal and external users run their GeoLift tests from start to finish!</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="geolift-v23-power-calculations-made-easier">GeoLift v2.3: Power Calculations Made Easier<a class="hash-link" href="#geolift-v23-power-calculations-made-easier" title="Direct link to heading">‚Äã</a></h2><p>Following the feedback we received, we re-built the Power Calculation and Market Selection functionalities from the ground up! The new code makes this process easier, more streamlined, and more powerful than ever before.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="whats-new">What&#x27;s New?<a class="hash-link" href="#whats-new" title="Direct link to heading">‚Äã</a></h3><ul><li>We&#x27;ve <strong>streamlined the entire Power Analysis and Market Selection process into a single function</strong>: <code>GeoLiftMarketSelection()</code>.</li><li>Previously, the process to select the test markets was very convoluted and involved going through several functions: <code>NumberLocations()</code>, <code>GeoLiftPower.search()</code>, <code>GeoLiftPowerFinder()</code>, and <code>GeoLiftPower()</code>. The new function, <code>GeoLiftMarketSelection()</code>, aggregates all of their functionalities and even improves upon them.</li><li>We&#x27;re soft-deprecating the <code>NumberLocations()</code>, <code>GeoLiftPower.search()</code>, <code>GeoLiftPowerFinder()</code>, and <code>GeoLiftPower()</code>. The development of these functions is now considered complete and they&#x27;re now superseeded by <code>GeoLiftMarketSelection()</code>.</li><li>We&#x27;ve included <strong>two</strong> new important <strong>metrics</strong> that can help us make better decisions when comparing between different test market candidates: <em>Average_MDE</em> and <em>abs_lift_in_zero</em>.</li><li>A <strong>new and improved ranking system</strong> takes into consideration all key model performance metrics to identify the best test markets for a given set-up.</li><li>We&#x27;ve added the option for <strong>one tailed tests</strong>.  These make the GeoLift model much more powerful than it was before, by simply changing the test hypothesis we want to validate.  Now you can chose from <em>Positive</em>, <em>Negative</em> and <em>Total</em> tests in the inference section and one sided or two sided tests in the power section.</li><li>The Market Selection process is more flexible and customizable than before! You can now include <strong>additional test constraints</strong> to focus only on the tests that make sense for our client. These are: the available budget (<em>budget</em>), acceptable holdout ranges (<em>holdout</em>), test markets we want to force into the test regions (<em>include_markets</em>), and markets that shouldn&#x27;t be considered as eligible test regions (<em>exclude_markets</em>).</li><li>We&#x27;ve added a <strong>new plotting method for GeoLiftMarketSelection</strong> objects. Through this method you can easily plot different test market selections and compare their model fit, MDE, and power curves! Plus, they lines have the GeoLift colors!
<img alt="PlotATTBest" src="/GeoLift/assets/images/GeoLiftMarketSelection_Plot2-1-c14a0cfa3e01ffce89e257496ca58e7e.png"></li><li>The <strong>new function</strong>: <code>GetWeights()</code> makes it easy to save the synthetic control weights into a data frame for further analysis.</li><li>To aid with <strong>MMM calibrations</strong>, we&#x27;ve included a new parameter in the Market Selection/Power Analysis function: <em>Correlations</em>. Setting it to TRUE allows the user to analyze the similarities between test and the control regions.</li><li>You can also <strong>plot historical similarities between test and control regions</strong> with <code>plotCorrels()</code>.
<img alt="PlotATTBest" src="/GeoLift/assets/images/plotcorrels-3bfb2729f658495bf30fe74722f7d05d.png"></li><li>A revamped <strong>GeoLift walkthrough vignette has been launched</strong> to accompany the new version of the package. This new material provides much more detailed explanation on our model, it&#x27;s parameters, how to run a study, and how to interpret the results.</li><li>We&#x27;ve <strong>fixed multiple bug and errors</strong> across the package (thanks for the feedback!).</li><li>Thanks to all of these changes, we&#x27;ve <strong>significantly reduced the total time needed in pre-test calculations!</strong></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-lift">GeoLift</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-measurement">Geo Measurement</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/scm">SCM</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/ascm">ASCM</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Launching GeoLift v2.3 - Streamlined and Improved Power Calculations" href="/GeoLift/blog/geolift-v23"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/GeoLift/blog/geo-measurement-review">A Brief Review of Geo Measurement Approaches</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-10-02T00:00:00.000Z" itemprop="datePublished">October 2, 2021</time> ¬∑ <!-- -->2 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/ArturoEsquerra/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/ArturoEsquerra.png" alt="Arturo Esquerra"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ArturoEsquerra/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Arturo Esquerra</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="intro-to-quasi-experiments">Intro to Quasi-Experiments<a class="hash-link" href="#intro-to-quasi-experiments" title="Direct link to heading">‚Äã</a></h2><p>While Randomized Control Trials remain as the gold-standard for causal analysis, good RCTs are hard to come by given how complicated and expensive they are to execute. In particular, their reliance on randomization, which is the foundation for their unbiasedness, is often one of the factors that limit their usage. Some of the most common drawbacks of randomly splitting a population into test and control groups are:</p><ul><li>Implementing and maintaining the randomization throughout the experiment requires a robust infrastructure.</li><li>Limiting the treatment to only the test group can be unethical. For example, restraining the control group from receiving life-saving medicine is wrong. This could also be the case for PSAs.</li><li>It is common to have constraints on which units can be part of the test and control groups. These constraints prevent us from having a good randomization. For example, in a geo-experiment there are often a set of locations that need to receive the treatment and some units can‚Äôt get the treatment, which severely reduces the possible randomizations and greatly reduces the experiment‚Äôs precision.</li></ul><p>Quasi-experimental methods offer a great alternative to measure the impact of a treatment (such as an ad campaign) whenever randomization is not logistically feasible or ethical. These methods differ from traditional RCTs in that they don‚Äôt use randomization to select the test and control groups. This gives us a lot of additional flexibility in the experimental design at the cost of a typically larger sample sizes and additional modeling assumptions. Nevertheless, under the right circumstances quasi-experiments provide a great alternative to measure a treatment and can empower advertisers that have been historically unable to use incrementality to start taking decisions based on Lift. Moreover, one of the most commonly used type of quasi-experiments are geo tests, in which the units of experimentation are geographical areas such as zip-codes, cities, regions, or states. In this note we will do a historical review of the most commonly used approaches to geographic quasi-experimentation and compare them to GeoLift.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-lift">GeoLift</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-measurement">Geo Measurement</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/scm">SCM</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/did">DID</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about A Brief Review of Geo Measurement Approaches" href="/GeoLift/blog/geo-measurement-review"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/GeoLift/blog/welcome">Welcome</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-10-01T00:00:00.000Z" itemprop="datePublished">October 1, 2021</time> ¬∑ <!-- -->One min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/ArturoEsquerra/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/ArturoEsquerra.png" alt="Arturo Esquerra"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/ArturoEsquerra/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Arturo Esquerra</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/NicolasMatrices-v2" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/NicolasMatrices-v2.png" alt="Nicolas Cruces"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/NicolasMatrices-v2" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nicolas Cruces</span></a></div><small class="avatar__subtitle" itemprop="description">Marketing Science @ Meta | GeoLift Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><strong>Welcome to GeoLift&#x27;s blog</strong> where we discuss anything related to:</p><ul><li>Geo-testing</li><li>Incrementality and Lift</li><li>GeoLift</li><li>and more!</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/facebook">facebook</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/hello">hello</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/GeoLift/blog/tags/geo-lift">GeoLift</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Welcome" href="/GeoLift/blog/welcome"><b>Read More</b></a></div></footer></article></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/GeoLift/docs/intro">Documentation</a></li><li class="footer__item"><a href="https://www.facebookblueprint.com/student/path/253063-geolift-marketing-measurement?sid=cd9a46bc-9685-4af4-8ac3-4482e858fba9&amp;sid_i=5" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blueprint Course<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/GeoLift/Successes">Success Cases</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.facebook.com/groups/fbgeolift" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCzkuhQFBCHz9TxzUXlNUINg" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/GeoLift/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebookincubator/GeoLift/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/GeoLift/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/GeoLift/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright ¬© 2023 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/GeoLift/assets/js/runtime~main.54f086ca.js"></script>
<script src="/GeoLift/assets/js/main.af2f5142.js"></script>
</body>
</html>