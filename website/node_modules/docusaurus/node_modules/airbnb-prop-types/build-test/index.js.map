{"version":3,"sources":["../test/index.js"],"names":["requireOnce","path","mod","require","cache","resolve","describe","it","forEach","NODE_ENV","main","to","equal","impls","mocks"],"mappings":";;AAAA;;AACA;;AAEA;;AACA;;;;AAEA,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AACzB,MAAMC,GAAG,GAAGC,OAAO,CAACF,IAAD,CAAnB,CADyB,CACE;;;AAC3B,SAAOE,OAAO,CAACC,KAAR,CAAcD,OAAO,CAACE,OAAR,CAAgBJ,IAAhB,CAAd,CAAP;AACA,SAAOC,GAAP;AACD;;AAEDI,QAAQ,CAAC,oBAAD,EAAuB,YAAM;AACnCC,EAAAA,EAAE,CAAC,4CAAD,EAA+C,YAAM;AACrD,KAAC,EAAD,EAAK,aAAL,EAAoB,MAApB,EAA4BC,OAA5B,CAAoC,UAACC,QAAD,EAAc;AAChD,UAAMC,IAAI,GAAG,oBAAQ;AAAA,eAAMV,WAAW,CAAC,IAAD,CAAjB;AAAA,OAAR,EAAiC;AAAES,QAAAA,QAAQ,EAARA;AAAF,OAAjC,CAAb;AACA,wBAAOC,IAAP,EAAaC,EAAb,CAAgBC,KAAhB,CAAsBC,iBAAtB;AACD,KAHD;AAID,GALC,CAAF;AAOAN,EAAAA,EAAE,CAAC,8BAAD,EAAiC,YAAM;AACvC,QAAMG,IAAI,GAAG,oBAAQ;AAAA,aAAMV,WAAW,CAAC,IAAD,CAAjB;AAAA,KAAR,EAAiC;AAAES,MAAAA,QAAQ,EAAE;AAAZ,KAAjC,CAAb;AACA,sBAAOC,IAAP,EAAaC,EAAb,CAAgBC,KAAhB,CAAsBE,iBAAtB;AACD,GAHC,CAAF;AAID,CAZO,CAAR","sourcesContent":["import { expect } from 'chai';\nimport { morph as mockEnv } from 'mock-env';\n\nimport mocks from '../build/mocks';\nimport impls from '../build';\n\nfunction requireOnce(path) {\n  const mod = require(path); // eslint-disable-line import/no-dynamic-require, global-require\n  delete require.cache[require.resolve(path)];\n  return mod;\n}\n\ndescribe('\"main\" entry point', () => {\n  it('requires implementations in non-production', () => {\n    ['', 'development', 'test'].forEach((NODE_ENV) => {\n      const main = mockEnv(() => requireOnce('..'), { NODE_ENV });\n      expect(main).to.equal(impls);\n    });\n  });\n\n  it('requires mocks in production', () => {\n    const main = mockEnv(() => requireOnce('..'), { NODE_ENV: 'production' });\n    expect(main).to.equal(mocks);\n  });\n});\n"],"file":"index.js"}